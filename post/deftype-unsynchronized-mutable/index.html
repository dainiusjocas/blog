<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.5.0"><meta name=author content="Dainius Jocas"><meta name=description content="A use-case for the `unsynchronized-mutable` and some related Java knowledge"><link rel=alternate hreflang=en-us href=https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/><meta name=theme-color content="#2962ff"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css crossorigin=anonymous title=hl-dark disabled><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin=anonymous><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap"><link rel=stylesheet href=/blog/css/academic.css><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','UA-122337142-2');</script><link rel=manifest href=/blog/index.webmanifest><link rel=icon type=image/png href=/blog/img/icon-32.png><link rel=apple-touch-icon type=image/png href=/blog/img/icon-192.png><link rel=canonical href=https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/><meta property="twitter:card" content="summary_large_image"><meta property="og:site_name" content="Dainius Jocas"><meta property="og:url" content="https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/"><meta property="og:title" content="Clojure deftype with `unsynchronized-mutable` | Dainius Jocas"><meta property="og:description" content="A use-case for the `unsynchronized-mutable` and some related Java knowledge"><meta property="og:image" content="https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/featured.png"><meta property="twitter:image" content="https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/featured.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2021-09-09T00:00:00+00:00"><meta property="article:modified_time" content="2021-09-09T00:00:00+00:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/"},"headline":"Clojure deftype with `unsynchronized-mutable`","image":["https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/featured.png"],"datePublished":"2021-09-09T00:00:00Z","dateModified":"2021-09-09T00:00:00Z","author":{"@type":"Person","name":"Dainius Jocas"},"publisher":{"@type":"Organization","name":"Dainius Jocas","logo":{"@type":"ImageObject","url":"https://www.jocas.lt/blog/img/icon-512.png"}},"description":"A use-case for the `unsynchronized-mutable` and some related Java knowledge"}</script><title>Clojure deftype with `unsynchronized-mutable` | Dainius Jocas</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id=navbar-main><div class=container><a class=navbar-brand href=/blog/>Dainius Jocas</a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/blog/#posts><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/blog/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/blog/#talks><span>Talks</span></a></li><li class=nav-item><a class="nav-link js-search" href=#><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class="nav-link js-dark-toggle" href=#><i class="fas fa-moon" aria-hidden=true></i></a></li></ul></div></div></nav><article class=article><div class="article-container pt-3"><h1>Clojure deftype with `unsynchronized-mutable`</h1><div class=article-metadata><div><span><a href=/blog/authors/dainius-jocas/>Dainius Jocas</a></span></div><span class=article-date>Sep 9, 2021</span>
<span class=middot-divider></span><span class=article-reading-time>6 min read</span>
<span class=middot-divider></span><span class=article-categories><i class="fas fa-folder mr-1"></i><a href=/blog/categories/clojure/>clojure</a>, <a href=/blog/categories/java-interop/>java-interop</a></span></div><div class="btn-links mb-3"></div></div><div class="article-header article-container featured-image-wrapper mt-4 mb-4" style=max-width:502px;max-height:423px><div style=position:relative><img src=/blog/post/deftype-unsynchronized-mutable/featured.png alt class=featured-image>
<span class=article-header-caption><a href=http://tutorials.jenkov.com/java-concurrency/volatile.html>Photo by jenkov.com</a></span></div></div><div class=article-container><div class=article-style><p>In this post let&rsquo;s take a closer look at why the <code>^:unsynchronized-mutable</code> is used in this Clojure code snippet and learn some Java in the process.</p><pre><code class=language-clojure>(ns user
  (:import (net.thisptr.jackson.jq JsonQuery Scope Output)
           (com.fasterxml.jackson.databind JsonNode)))

(definterface IGetter
  (^com.fasterxml.jackson.databind.JsonNode getValue []))

(deftype OutputContainer [^:unsynchronized-mutable ^JsonNode container]
  Output
  (emit [_ output-json-node] (set! container output-json-node))
  IGetter
  (getValue [_] container))

(defn query-json-node [^JsonNode data ^JsonQuery query]
  (let [output-container (OutputContainer. nil)]
    (.apply query (Scope/newEmptyScope) data output-container)
    (.getValue output-container)))
</code></pre><p>Note that this code snippet is a bit trimmed down for clarity.
The full code can be found <a href=https://github.com/dainiusjocas/clj-jq/blob/main/src/jq/core.clj>here</a>.</p><h2 id=introduction>Introduction</h2><p>I was working on <a href=https://github.com/dainiusjocas/clj-jq><code>clj-jq</code></a>:
a Clojure library whose goal is to make it easy to embed a <a href=https://stedolan.github.io/jq/><code>jq</code></a> processor directly into an application and that this application can be compiled with the GraalVM <code>native-image</code>.
<code>clj-jq</code> was intended to be a thin wrapper for the <a href=https://github.com/eiiches/jackson-jq><code>jackson-jq</code></a> Java library.
The exact use cases of the <code>clj-jq</code> are left out for future blog posts.</p><h2 id=wrapper>Wrapper</h2><p>The <code>jackson-jq</code> provides a nice example <a href=https://github.com/eiiches/jackson-jq/blob/develop/1.x/jackson-jq/src/test/java/examples/Usage.java>class</a> that helped me to start implementing the wrapper.
I&rsquo;ve taken a straightforward approach to create a Clojure library: just &ldquo;translate&rdquo; the necessary Java code to Clojure using the <a href=https://clojure.org/reference/java_interop>Java interop</a> more or less verbatim, parameterize the hardcoded parts, refactor here and there, and the result would be a new library.</p><p>The &ldquo;translation&rdquo; went as expected until I had to deal with a code that implements the <a href=https://github.com/eiiches/jackson-jq/blob/6bf785ddb29618f53dafe2f336cd80bdf18a6b45/jackson-jq/src/main/java/net/thisptr/jackson/jq/Output.java><code>Output</code></a> interface:</p><pre><code class=language-java>final List&lt;JsonNode&gt; out = new ArrayList&lt;&gt;();
q.apply(childScope, in, out::add);
</code></pre><p>In the example an instance of <code>ArrayList</code> and some Java magic was used (we&rsquo;ll talk about what and why in the <a href=#appendix>appendix</a>).
Since Clojure functions doesn&rsquo;t implement <code>Output</code> interface I can&rsquo;t pass a function, therefore I&rsquo;ve &ldquo;translated&rdquo; the code using <code>reify</code> approach as shown below:</p><pre><code class=language-clojure>(defn query-json-node [^JsonNode data ^JsonQuery query]
  (let [array-list (ArrayList.)]
    (.apply query (Scope/newChildScope root-scope) data
            (reify Output
                   (emit [this json-node] (.add array-list json-node))))
    (.writeValueAsString mapper ^JsonNode (.get array-list 0))))
</code></pre><p>it worked, but I wasn&rsquo;t happy about it.</p><p>Using an <code>ArrayList</code> in such a function might be OK for an example.
But for a library something more specialized is desired because of several reasons:</p><ul><li>the <code>ArrayList</code> will always hold just one value;</li><li>allocating an <code>ArrayList</code> and <code>reify</code>ing is not super cheap;</li></ul><p>It got me thinking about how to make something better.</p><h2 id=requirements>Requirements</h2><p>The requirements for the <code>Output</code> implementation:</p><ul><li>a specialized and efficient class;</li><li>that class has to act as a mutable<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> container that holds one value;</li></ul><p>Efficiency is desired because the library is intended to be used in &ldquo;hot spots&rdquo; of an application.</p><p>Before starting to work on <code>clj-jq</code> I expected that the work would not require writing any Java code because that would complicate the release of the library.
Therefore, I aimed to implement my <code>Output</code> class in Clojure.
Also, <code>gen-class</code> feels a bit &ldquo;too much&rdquo; for this little problem.</p><h2 id=implementation>Implementation</h2><p>The <code>Output</code> interface defines behaviour, therefore I&rsquo;ve chosen the <a href=https://clojuredocs.org/clojure.core/deftype><code>deftype</code></a>.
The implementation class needs mutable state to hold one value.
<code>deftype</code> has two options for mutability of fields: <code>volatile-mutable</code> and <code>unsynchronized-mutable</code>.
The <code>deftype</code> docstring advices that the usage of both options is discouraged and are for &ldquo;experts only&rdquo;.
I skipped the first part of the advice because I wanted to learn a good lesson.
For the second part my thinking was that if I used the options &ldquo;correctly&rdquo; I could consider myself an &ldquo;expert&rdquo; :-)</p><p><img src=grumpy-expert.jpg alt=Expert></p><p>What are the implications of those two <code>deftype</code> field options:</p><ul><li><code>volatile-mutable</code> means that field is going to be marked as <a href=https://www.baeldung.com/java-volatile><code>volatile</code></a>.
Volatile in Java means that the variable is stored in the main memory and <strong>not</strong> in the CPU cache.
This provides a data consistency guarantee that all threads will observe the updated value immediately<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.
Therefore, the <code>volatile-mutable</code> option is OK to be used when the field is going to be written to by one thread and read from multiple threads.</li><li>The field marked with <code>unsynchronized-mutable</code> option is backed by a regular Java mutable field.
In contrast to <code>volatile-mutable</code>, the <code>unsynchronized-mutable</code> value might be stored in the CPU cache.
Therefore, <code>unsynchronized-mutable</code> field is OK when used in single-threaded<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> contexts.</li></ul><p>Since the scope in which my container class is going to be used is small and short-lived (can be considered as an internal implementation detail) and not multi-threaded,
I can choose an option that promises a better performance: <code>unsynchronized-mutable</code><sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>.</p><h2 id=go-back-to-the-code>Go back to the code</h2><p>The most interesting bit of the entire snippet is the <code>deftype</code>:</p><pre><code class=language-clojure>(deftype OutputContainer [^:unsynchronized-mutable ^JsonNode container]
  Output
  (emit [_ output-json-node] (set! container output-json-node))
  IGetter
  (getValue [_] container))
</code></pre><p>The class generated by <code>deftype</code> will be named <code>OutputContainer</code>.
It has one <strong>mutable</strong> field: <code>container</code> that is hinted to be of <code>JsonNode</code> type.
By declaring a method mutable deftype generates the <a href=https://clojuredocs.org/clojure.core/set!><code>set!</code></a> assignment special form to allow mutation of the field.</p><p>Usage example of the <code>OutputContainer</code>:</p><pre><code class=language-clojure>(defn query-json-node [^JsonNode data ^JsonQuery query]
  (let [output-container (OutputContainer. nil)]
    (.apply query (Scope/newEmptyScope) data output-container)
    (.getValue output-container)))
</code></pre><p>In the function <code>query-json-node</code> we create an instance of the <code>OutputContainer</code>.
Then pass it to <code>apply</code> method of the <code>JsonQuery</code>.
Somewhere in the <code>apply</code> the <code>Output::emit</code> will be called<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>.
Finally, we take out the value of <code>JsonNode</code> type from the <code>output-container</code> instance.</p><h2 id=summary>Summary</h2><p><code>unsynchronized-mutable</code> is relatively rarely used in the wild: only <a href="https://github.com/search?l=Clojure&q=unsynchronized-mutable&type=Code">776</a> out of <a href="https://github.com/search?l=Clojure&q=deftype&type=Code">13,362</a> uses of <code>deftype</code> according to GitHub code search as of 2021-09-09.
But when we do understand the implications, and we need exactly what the option provides, we can go ahead and use it despite what the docstring says.
And don&rsquo;t forget to test your code!</p><h2 id=a-idappendix-appendix><a id=appendix>Appendix</h2><p>Once again, let&rsquo;s look at this piece of code:</p><pre><code class=language-java>final List&lt;JsonNode&gt; out = new ArrayList&lt;&gt;();
q.apply(childScope, in, out::add);
</code></pre><p>Here method reference to <code>add</code> of a <code>List&lt;JsonNode></code> object is used as an argument to a method that expects <code>Output</code> type.
How does it work?</p><h3 id=a-bit-of-java-theory>A bit of Java theory</h3><p>Any interface in Java with a SAM (Single Abstract Method) is a <a href=https://www.baeldung.com/java-8-functional-interfaces><strong>functional interface</strong></a>.
And for an argument of a functional interface type one can provide either:</p><ul><li>a class object that implements the interface,</li><li>lambda expression.</li></ul><p>A <a href=https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html>method reference</a> can replace a lambda expression when passed and returned value types match.
You can use whichever is <a href=https://stackoverflow.com/a/24493905/1728133>easier to read</a>.</p><h3 id=why-does-it-work-anyway>Why does it work anyway?</h3><p>The <a href=https://github.com/eiiches/jackson-jq/blob/6bf785ddb29618f53dafe2f336cd80bdf18a6b45/jackson-jq/src/main/java/net/thisptr/jackson/jq/Output.java><code>Output</code></a> is an interface that provides just one method <code>emit</code> (default methods doesn&rsquo;t count).
Therefore, it is a functional interface (however, not annotated as such).</p><p>We can provide a lambda expression where a functional interface type is expected.
Also, in the same place we can provide a method reference whose types match the expected input-output types.</p><p>What are the expected types for <code>Output::emit</code>?
<code>JsonNode</code> for input and <code>void</code> for output.</p><p>When a variable is of type <code>List&lt;JsonNode></code> then the <code>add</code> method accepts <code>JsonNode</code> type and returns <code>void</code>.</p><p>We can see that types match, therefore method reference to <code>out::add</code> can be used when <code>Output</code> is required. Voila!</p><h2 id=footnotes>Footnotes</h2><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>Mutable and not-shared might be OK. <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>Note that writes are not atomic for the volatile value. <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>Consult the <a href=https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html#jls-17.4>Java Memory Model</a> docs to learn more. <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4 role=doc-endnote><p>A proper discussion on <a href=https://stackoverflow.com/questions/21127636/what-are-the-semantic-implications-of-volatile-mutable-versus-unsynchronized-m><code>deftype</code> mutability</a> and <a href=https://stackoverflow.com/questions/3132931/mutable-fields-in-clojure-deftype>here</a> <a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5 role=doc-endnote><p>For example <a href=https://github.com/eiiches/jackson-jq/blob/6bf785ddb29618f53dafe2f336cd80bdf18a6b45/jackson-jq/src/main/java/net/thisptr/jackson/jq/internal/tree/ArrayConstruction.java#L29>here</a> <a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><div class=article-tags><a class="badge badge-light" href=/blog/tags/clojure/>clojure</a>
<a class="badge badge-light" href=/blog/tags/java-interop/>java-interop</a></div><div class=share-box aria-hidden=true><ul class=share><li><a href="https://twitter.com/intent/tweet?url=https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/&text=Clojure%20deftype%20with%20%60unsynchronized-mutable%60" target=_blank rel=noopener class=share-btn-twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/&t=Clojure%20deftype%20with%20%60unsynchronized-mutable%60" target=_blank rel=noopener class=share-btn-facebook><i class="fab fa-facebook-f"></i></a></li><li><a href="mailto:?subject=Clojure%20deftype%20with%20%60unsynchronized-mutable%60&body=https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/" target=_blank rel=noopener class=share-btn-email><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/&title=Clojure%20deftype%20with%20%60unsynchronized-mutable%60" target=_blank rel=noopener class=share-btn-linkedin><i class="fab fa-linkedin-in"></i></a></li><li><a href="https://web.whatsapp.com/send?text=Clojure%20deftype%20with%20%60unsynchronized-mutable%60%20https://www.jocas.lt/blog/post/deftype-unsynchronized-mutable/" target=_blank rel=noopener class=share-btn-whatsapp><i class="fab fa-whatsapp"></i></a></li></ul></div><div class="media author-card content-widget-hr"><div class=media-body><h5 class=card-title><a href=/blog/authors/dainius-jocas/></a></h5><ul class=network-icon aria-hidden=true></ul></div></div><div class="article-widget content-widget-hr"><h3>Related</h3><ul><li><a href=/blog/talk/london-information-retrieval-meetup-2021-06/>Lucene-grep a.k.a. lmgrep</a></li><li><a href=/blog/post/babashka-aws-lambda/>Deploy babashka script to AWS Lambda</a></li><li><a href=/blog/post/uberdeps-for-aws-lambda/>Using Uberdeps to Build AWS Lambda Uberjar</a></li><li><a href=/blog/talk/vilnius-clojure-meetup/>Clojure Workflow @ TokenMill</a></li><li><a href=/blog/post/gitlab-ci-clojure-dependencies/>Using Gitlab CI Cache for Clojure Dependencies</a></li></ul></div></div></article><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/clojure.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/java.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin=anonymous></script><script>hljs.initHighlightingOnLoad();</script><script>const search_config={"indexURI":"/blog/index.json","minLength":1,"threshold":0.3};const i18n={"no_results":"No results found","placeholder":"Search...","results":"results found"};const content_type={'post':"Posts",'project':"Projects",'publication':"Publications",'talk':"Talks"};</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/blog/js/academic.min.d6bd04fdad2ad213aa8111c5a3b72fc5.js></script><div class=container><footer class=site-footer><p class=powered-by>Â© 2021 Dainius Jocas &#183;
Powered by the
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic theme</a> for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>