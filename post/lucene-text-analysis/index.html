<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.5.0"><meta name=author content="Dainius Jocas"><meta name=description content="`lmgrep` exposes easy to use interface to work with Lucene text analysis"><link rel=alternate hreflang=en-us href=https://www.jocas.lt/blog/post/lucene-text-analysis/><meta name=theme-color content="#2962ff"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css crossorigin=anonymous title=hl-dark disabled><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin=anonymous><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap"><link rel=stylesheet href=/blog/css/academic.css><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','UA-122337142-2');</script><link rel=manifest href=/blog/index.webmanifest><link rel=icon type=image/png href=/blog/img/icon-32.png><link rel=apple-touch-icon type=image/png href=/blog/img/icon-192.png><link rel=canonical href=https://www.jocas.lt/blog/post/lucene-text-analysis/><meta property="twitter:card" content="summary_large_image"><meta property="og:site_name" content="Dainius Jocas"><meta property="og:url" content="https://www.jocas.lt/blog/post/lucene-text-analysis/"><meta property="og:title" content="lmgrep Text Analysis | Dainius Jocas"><meta property="og:description" content="`lmgrep` exposes easy to use interface to work with Lucene text analysis"><meta property="og:image" content="https://www.jocas.lt/blog/post/lucene-text-analysis/featured.png"><meta property="twitter:image" content="https://www.jocas.lt/blog/post/lucene-text-analysis/featured.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2021-04-23T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-23T00:00:00+00:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.jocas.lt/blog/post/lucene-text-analysis/"},"headline":"lmgrep Text Analysis","image":["https://www.jocas.lt/blog/post/lucene-text-analysis/featured.png"],"datePublished":"2021-04-23T00:00:00Z","dateModified":"2021-04-23T00:00:00Z","author":{"@type":"Person","name":"Dainius Jocas"},"publisher":{"@type":"Organization","name":"Dainius Jocas","logo":{"@type":"ImageObject","url":"https://www.jocas.lt/blog/img/icon-512.png"}},"description":"`lmgrep` exposes easy to use interface to work with Lucene text analysis"}</script><title>lmgrep Text Analysis | Dainius Jocas</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id=navbar-main><div class=container><a class=navbar-brand href=/blog/>Dainius Jocas</a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/blog/#posts><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/blog/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/blog/#talks><span>Talks</span></a></li><li class=nav-item><a class="nav-link js-search" href=#><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class="nav-link js-dark-toggle" href=#><i class="fas fa-moon" aria-hidden=true></i></a></li></ul></div></div></nav><article class=article><div class="article-container pt-3"><h1>lmgrep Text Analysis</h1><div class=article-metadata><div><span><a href=/blog/authors/dainius-jocas/>Dainius Jocas</a></span></div><span class=article-date>Apr 23, 2021</span>
<span class=middot-divider></span><span class=article-reading-time>7 min read</span>
<span class=middot-divider></span><span class=article-categories><i class="fas fa-folder mr-1"></i><a href=/blog/categories/lucene/>Lucene</a></span></div><div class="btn-links mb-3"></div></div><div class="article-header article-container featured-image-wrapper mt-4 mb-4" style=max-width:720px;max-height:334px><div style=position:relative><img src=/blog/post/lucene-text-analysis/featured_hu8bfc077f031060abb869f19f07ddf191_100646_720x0_resize_lanczos_2.png alt class=featured-image>
<span class=article-header-caption><a href=https://mongopi.wordpress.com/tag/inverted-index/>Photo by mongopi</a></span></div></div><div class=article-container><div class=article-style><h2 id=tldr>TL;DR</h2><p><code>lmgrep</code> provides an easy way to play with various text analysis options.
Just download the <code>lmgrep</code> <a href=https://github.com/dainiusjocas/lucene-grep/releases>binary</a>, run it with <code>--only-analyze</code>, and observe the list of tokens.</p><pre><code class=language-shell>echo &quot;Dogs and CATS&quot; | lmgrep \
  --only-analyze \
  --analysis='
    {
      &quot;tokenizer&quot;: {&quot;name&quot;: &quot;standard&quot;},
      &quot;token-filters&quot;: [
        {&quot;name&quot;: &quot;lowercase&quot;},
        {&quot;name&quot;: &quot;englishminimalstem&quot;}
    ]
  }'
# =&gt; [&quot;dog&quot;,&quot;and&quot;,&quot;cat&quot;]
</code></pre><h2 id=text-analysis>Text Analysis</h2><p>The <a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html>Elasticsearch documentation</a> describes text analysis as:</p><blockquote><p>the process of converting unstructured text into a structured format thatâ€™s optimized for search.</p></blockquote><p>Therefore, to learn how the full-text search works it is important to understand how the text is, well, analyzed.
The remainder of the post focuses on how text analysis is done in <a href=https://lucene.apache.org/>Lucene</a> which is the library that powers search engines like Elasticsearch and Solr, and what <code>lmgrep</code> provides to analyze your text.</p><h1 id=lucene>Lucene</h1><p>Text analysis in the Lucene land is defined by 3 types of components:</p><ul><li><strong>list</strong> of character filters (changes to the text before tokenization, e.g. HTML stripping, character replacement, etc.),</li><li><strong>one</strong> tokenizer (splits text into tokens, e.g. at whitespace characters),</li><li><strong>list</strong> of token filters (normalizes the tokens, e.g. lowercases all the letters).</li></ul><p>The combination of text analysis components makes an <code>Analyzer</code>.
You can think that an analyzer is a recipe to convert a string into a list of tokens<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><h2 id=lmgrep><code>lmgrep</code></h2><p><code>lmgrep</code> is a search tool that is based on the <a href=https://lucene.apache.org/core/8_2_0/monitor/org/apache/lucene/monitor/Monitor.html>Lucene Monitor</a> library.
To do the full-text search it needs to do the same thing that likes of Elasticsearch are doing: to analyze text.
<code>lmgrep</code> packs many text <a href=https://github.com/dainiusjocas/lucene-grep/blob/v2021.04.23/docs/analysis-components.md>analysis components</a>.
Also, it provides a list of <a href=https://github.com/dainiusjocas/lucene-grep/blob/v2021.04.23/docs/predefined-analyzers.md>predefined analyzers</a>.
Nothing special here, the same battle tested and boring Lucene components that gets the job done<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</p><p>However, <code>lmgrep</code> provides one clever twist to text analysis:
a way to specify an analyzer using plain data in JSON, e.g.:</p><pre><code class=language-shell>echo &quot;&lt;p&gt;foo bars baz&lt;/p&gt;&quot; | \
  lmgrep \
  --only-analyze \
  --analysis='
  {
    &quot;char-filters&quot;: [
      {&quot;name&quot;: &quot;htmlStrip&quot;},
      {
        &quot;name&quot;: &quot;patternReplace&quot;,
         &quot;args&quot;: {
           &quot;pattern&quot;: &quot;foo&quot;,
           &quot;replacement&quot;: &quot;bar&quot;
        }
      }
    ],
    &quot;tokenizer&quot;: {&quot;name&quot;: &quot;standard&quot;},
    &quot;token-filters&quot;: [
      {&quot;name&quot;: &quot;englishMinimalStem&quot;},
      {&quot;name&quot;: &quot;uppercase&quot;}
    ]
  }
  '
# =&gt; [&quot;BAR&quot;,&quot;BAR&quot;,&quot;BAZ&quot;]
</code></pre><p>Again, nothing special here, read the docs<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> of an interesting text analysis component, e.g.
character filter <a href=https://lucene.apache.org/core/8_3_0/analyzers-common/org/apache/lucene/analysis/pattern/PatternReplaceCharFilterFactory.html><code>patternReplace</code></a>,
add its config to the <code>--analysis</code>, and apply it on your text.</p><p>Conceptually it is very similar to what Elasticsearch or Solr are providing: <code>analysis</code> part in the index configuration JSON in Elasticsearch, and Solr Schemas in XML.</p><p><code>lmgrep</code> analysis component has this structure:</p><pre><code>{&quot;name&quot;: &quot;COMPONENT_NAME&quot;, &quot;args&quot;: {&quot;ARG_NAME&quot;: &quot;ARG_VALUE&quot;}}
</code></pre><p>Notes:</p><ul><li>some components, e.g. <code>stop</code> token filter, expect a file as an argument.
To support such components <code>lmgrep</code> brutally patched Lucene to load data from arbitrary files while preserving the predefined analyzers with, e.g. their custom stop-word files.</li><li>when a predefined analyzer is provided for text analysis then all other analysis components are silently ignored.</li><li>predefined analyzers do not support the <code>args</code> as of <a href=https://github.com/dainiusjocas/lucene-grep/issues/82>now</a>, just the <code>name</code>.</li><li><code>lmgrep</code> as of now doesn&rsquo;t provide a way to <a href=https://github.com/dainiusjocas/lucene-grep/issues/83>share components between analyzers</a>.</li></ul><p>That is pretty much all there is to know about how <code>lmgrep</code> does text analysis. Try it out and let me know how it goes.</p><h2 id=--only-analyze><code>--only-analyze</code></h2><p>I like the Elasticsearch&rsquo;s <a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-analyze.html>Analyze API</a>.
It allows me to look at the raw tokens that are either stored in the index or produced out of the search query.</p><p>To make debugging of <code>lmgrep</code> easier I wanted to expose something similar to Analyze API. The <code>--only-analyze</code> flag is my humble attempt to do that.</p><p>When the flag is specified then <code>lmgrep</code> just outputs a list of tokens that is produced by applying an analyzer on the input text, e.g.:</p><pre><code class=language-shell>echo &quot;the quick brown fox&quot; | lmgrep --only-analyze
# =&gt; [&quot;the&quot;,&quot;quick&quot;,&quot;brown&quot;,&quot;fox&quot;]
</code></pre><h3 id=implementation>Implementation</h3><p>The machinery under the <code>--only-analyze</code> works as follows:</p><ul><li>one thread is dedicated to read and decode the text input (either from STDIN or a file),</li><li>one thread is dedicated to write to the STDOUT,</li><li>the remaining CPU cores can be used by a thread pool that analyzes the text (thanks to Lucene Analyzer implementation being thread-safe).</li></ul><p>On my laptop <code>lmgrep</code> analyzes ~1GB of text in ~11 seconds and consumes maximum 609 MB of RAM. It should result in ~200 GB of text per hour. IMO, not bad. Of course, the more involved the text analysis is the longer it takes.</p><p><img src=text-analysis.png alt=Performance></p><p>Note that the output of <code>--only-analyze</code> has the same order as the input. IMO, it makes the output a bit easier to understand. However, preserving the order limits the throughput. It is because the time and resources needed to analyze an individual piece of text can vary greatly, and the required coordination introduces some overhead.</p><p>Consider an example of analyzing the text attributes of a book: assume that the first line sent to <code>lmgrep</code> is the title of the book, the second line contains a full text of the book, and the third line is the summary. The title is relatively small, it is quickly analyzed and immediately written to STDOUT. The summary is a bit longer but still many times smaller than the body. To preserve the order <code>lmgrep</code> (before writing the tokens of the summary to STDOUT) waits for the analysis on the body to be finished and written to STDOUT and only then tokens of the summary are written out.</p><p>Notes:</p><ul><li>the <code>--explain</code> flag is coming to <code>lmgrep</code>;</li><li>the output lines are valid JSON (<code>jq</code> is your friend);</li><li>the positional arguments for <code>--only-analyze</code> are interpreted as files and when present then STDIN is ignored.</li></ul><h3 id=interesting-bit>Interesting Bit</h3><p>One thing that constantly frustrates me with Elasticsearch&rsquo;s Analysis API is that I can&rsquo;t specify custom char filters, tokenizer, and token filter directly in the body of the request to the Analysis API.
To observe the output of text analysis that involves custom text analysis components first I have to create an index with an analyzer and then call Analyze API that involves that index. <code>lmgrep</code> avoids this pain point by allowing to declare text analysis components inline.</p><h2 id=post-script>Post Script</h2><p>All this analyzer construction wizardry is possible because of Lucene&rsquo;s <code>AbstractAnalysisFactory</code> class and features provided by its subclasses. The <a href=https://lucene.apache.org/core/8_3_1/analyzers-common/org/apache/lucene/analysis/custom/CustomAnalyzer.html><code>CustomAnalyzer</code></a> builder exposes methods that expects a <code>Class</code> as an argument, e.g. <a href=https://lucene.apache.org/core/8_3_1/analyzers-common/org/apache/lucene/analysis/custom/CustomAnalyzer.Builder.html#addCharFilter-java.lang.Class-java.util.Map-><code>addCharFilter</code></a>. The trick here is that, e.g. the class <a href=https://lucene.apache.org/core/7_3_1/analyzers-common/org/apache/lucene/analysis/util/TokenFilterFactory.html><code>TokenFilterFactory</code></a> provides a method <code>availableTokenFilters</code> that returns a set of <code>names</code> of token filters and with those <code>names</code> you can get a <code>Class</code> object that can be supplied to <code>CustomAnalyzer</code> builder methods.</p><p>The discovery of available factory classes is based on the classpath analysis, e.g. fetching all classes where name matches a pattern like <code>.*FilterFactory</code> and are subclasses of a <code>TokenFilterFactory</code>. However, for the reasons that were beyond my understanding, when I created my own <code>TokenFilterFactory</code> class it was not discovered by Lucene <code>Â¯\_(ãƒ„)_/Â¯</code>.</p><p>Yeah, great, but <code>lmgrep</code> is compiled with the GraalVM <code>native-image</code> which assumes closed-world and throws the dynamism of the JVM out the window. How then does exactly this TokenFilterFactory-thing-class discovery works? Yes, Native images must include all the classes because at run-time it cannot create classes, but it can be worked around by providing the configuration with the classes that are going to be used at run-time, and those interesting classes can be reflectively discovered at run-time. <code>lmgrep</code> relies on the Java classes being discoverable at compile-time where the reflection works as expected.</p><p>To instruct the <code>native-image</code> to discover the Java classes from Clojure code you can specify the class under the regular <code>def</code> because to the <code>native-image</code> <code>def</code>s look like constants and are <strong>evaluated</strong> at compiled-time. So, if <code>lmgrep</code> misses some awesome Lucene token filter, all it takes is to add it to the hashmap under a <code>def</code>.</p><h2 id=footnotes>Footnotes</h2><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p><a href=http://blog.mikemccandless.com/2012/04/lucenes-tokenstreams-are-actually.html>Lucene TokenStreams are actually graphs</a> <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>If something is missing then let me know by creating an issue <a href=https://github.com/dainiusjocas/lucene-grep/issues>here</a>. <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>Just Google for &ldquo;Lucene &lt;COMPONENT_NAME>&rdquo; <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><div class=article-tags><a class="badge badge-light" href=/blog/tags/lucene/>Lucene</a>
<a class="badge badge-light" href=/blog/tags/tokenization/>tokenization</a></div><div class=share-box aria-hidden=true><ul class=share><li><a href="https://twitter.com/intent/tweet?url=https://www.jocas.lt/blog/post/lucene-text-analysis/&text=lmgrep%20Text%20Analysis" target=_blank rel=noopener class=share-btn-twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=https://www.jocas.lt/blog/post/lucene-text-analysis/&t=lmgrep%20Text%20Analysis" target=_blank rel=noopener class=share-btn-facebook><i class="fab fa-facebook-f"></i></a></li><li><a href="mailto:?subject=lmgrep%20Text%20Analysis&body=https://www.jocas.lt/blog/post/lucene-text-analysis/" target=_blank rel=noopener class=share-btn-email><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=https://www.jocas.lt/blog/post/lucene-text-analysis/&title=lmgrep%20Text%20Analysis" target=_blank rel=noopener class=share-btn-linkedin><i class="fab fa-linkedin-in"></i></a></li><li><a href="https://web.whatsapp.com/send?text=lmgrep%20Text%20Analysis%20https://www.jocas.lt/blog/post/lucene-text-analysis/" target=_blank rel=noopener class=share-btn-whatsapp><i class="fab fa-whatsapp"></i></a></li></ul></div><div class="media author-card content-widget-hr"><div class=media-body><h5 class=card-title><a href=/blog/authors/dainius-jocas/></a></h5><ul class=network-icon aria-hidden=true></ul></div></div><div class="article-widget content-widget-hr"><h3>Related</h3><ul><li><a href=/blog/post/intro-to-lucene-grep/>lmgrep - Lucene Based grep-like Utility</a></li></ul></div></div></article><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/clojure.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/java.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin=anonymous></script><script>hljs.initHighlightingOnLoad();</script><script>const search_config={"indexURI":"/blog/index.json","minLength":1,"threshold":0.3};const i18n={"no_results":"No results found","placeholder":"Search...","results":"results found"};const content_type={'post':"Posts",'project':"Projects",'publication':"Publications",'talk':"Talks"};</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/blog/js/academic.min.d6bd04fdad2ad213aa8111c5a3b72fc5.js></script><div class=container><footer class=site-footer><p class=powered-by>Â© 2021 Dainius Jocas &#183;
Powered by the
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic theme</a> for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>